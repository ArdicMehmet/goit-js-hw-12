{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\r\nimport 'simplelightbox/dist/simple-lightbox.min.css';\r\nimport iziToast from \"izitoast\";\r\nimport \"izitoast/dist/css/iziToast.min.css\";\r\nimport axios from 'axios';\r\n{/* <li>\r\n          <a href=\"./img/deneme.png\">\r\n            <img src=\"./img/deneme.png\" alt=\"Image 1\" />\r\n            <div class=\"general-likes-container\">\r\n              <div class=\"likes-container\">\r\n                <h3 class=\"likes-title\">Likes</h3>\r\n                <div class=\"likes\">1813</div>\r\n              </div>\r\n              <div class=\"likes-container\">\r\n                <h3 class=\"likes-title\">Views</h3>\r\n                <div class=\"likes\">900290</div>\r\n              </div>\r\n              <div class=\"likes-container\">\r\n                <h3 class=\"likes-title\">Comments</h3>\r\n                <div class=\"likes\">229</div>\r\n              </div>\r\n              <div class=\"likes-container\">\r\n                <h3 class=\"likes-title\">Downloads</h3>\r\n                <div class=\"likes\">610937</div>\r\n              </div>\r\n            </div>\r\n          </a>\r\n        </li> */}\r\n\r\nconst loadingDOM = document.querySelector('.loading');\r\nconst search_btn = document.querySelector('.searchBtn');\r\nconst galleryDOM = document.querySelector('.gallery');\r\nconst base_url = \"https://pixabay.com/api/?\"\r\nconst searchInput = document.querySelector('.searchInput');\r\nconst loadmoreDOM = document.querySelector('.load-btn');\r\nconst api_key = \"46048347-9d88aa79f4238f227ee13ac9b\"\r\n// const messageContainerDOM = document.querySelector('.messageContainer'); \r\n\r\nlet last_search_text = '';\r\nlet page = 1;\r\nfunction refresh(){\r\n  galleryDOM.innerHTML=\"\";\r\n}\r\n\r\nasync function getPhoto(searchText){\r\n  if(page == 1){\r\n    refresh();\r\n  }\r\n  const full_url = `${base_url}key=${api_key}&q=${searchText}&image_type=photo&orientation=horizontal&safesearch=true&per_page=40&page=${page}`;\r\n  \r\n  try {\r\n    loadingDOM.style.display = \"block\";\r\n    const response = await axios(full_url);\r\n   \r\n     if (!(response.status >= 200 && response.status < 300)) {\r\n      throw new Error(`Response status: ${response.status}`);\r\n    }\r\n    loadingDOM.style.display = \"none\";\r\n    const images = response.data;\r\n    if(images?.hits.length > 0){\r\n      searchInput.value = \"\";\r\n      const fragment = document.createDocumentFragment();\r\n      images.hits.forEach((image) => {\r\n        const li = document.createElement('li');\r\n        li.innerHTML = `<a href=\"${image.largeImageURL}\">\r\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\r\n            <div class=\"general-likes-container\">\r\n              <div class=\"likes-container\">\r\n                <h3 class=\"likes-title\">Likes</h3>\r\n                <div class=\"likes\">${image.likes}</div>\r\n              </div>\r\n              <div class=\"likes-container\">\r\n                <h3 class=\"likes-title\">Views</h3>\r\n                <div class=\"likes\">${image.views}</div>\r\n              </div>\r\n              <div class=\"likes-container\">\r\n                <h3 class=\"likes-title\">Comments</h3>\r\n                <div class=\"likes\">${image.comments}</div>\r\n              </div>\r\n              <div class=\"likes-container\">\r\n                <h3 class=\"likes-title\">Downloads</h3>\r\n                <div class=\"likes\">${image.downloads}</div>\r\n              </div>\r\n            </div>\r\n          </a>`\r\n        fragment.appendChild(li);\r\n      })\r\n      galleryDOM.appendChild(fragment);\r\n      const lightbox = new SimpleLightbox('.gallery a', {\r\n        captions: true,             \r\n        captionsData: 'alt',       \r\n        captionDelay: 250,         \r\n        showCounter: true,          \r\n        enableKeyboard: true,      \r\n        loop: true,                \r\n        nav: true,                 \r\n        close: true,                \r\n        animationSpeed: 250,\r\n    });\r\n    \r\n    lightbox.on('show.simplelightbox', function () {\r\n      console.log('Modal is shown');\r\n    });\r\n    \r\n    lightbox.on('close.simplelightbox', function () {\r\n      console.log('Modal is closed');\r\n    });\r\n    }\r\n    else {\r\n      // messageContainerDOM.style.display = \"flex\";\r\n      // const closeBtn = document.querySelector('.close');\r\n      // closeBtn.addEventListener('click', () => {\r\n      //   messageContainerDOM.style.display = \"none\";\r\n      // })\r\n      loadmoreDOM.style.display = \"none\";\r\n      iziToast.show({\r\n        theme: 'custom',\r\n        icon: 'fas fa-exclamation-circle',\r\n        message: 'Sorry, there are no images matching your search query. Please, try again!',\r\n        position: 'topRight',\r\n        progressBarColor: '#B51B1B',\r\n        onOpening: function(instance, toast){\r\n            console.info('Modal is open');\r\n        },\r\n        onClosing: function(instance, toast, closedBy){\r\n            console.info('closedBy: ' + closedBy); // tells if it was closed by 'drag' or 'button'\r\n        }\r\n    });\r\n    }\r\n    \r\n    \r\n  } catch (error) {\r\n    loadingDOM.style.display = \"none\";\r\n    console.error(error.message);\r\n  }\r\n  \r\n}\r\n\r\nsearch_btn.addEventListener('click', _ => {\r\n  const searchText = searchInput.value.trim();\r\n  \r\n  if(searchText){\r\n    page = 1\r\n    last_search_text = searchText;\r\n    getPhoto(last_search_text);\r\n    loadmoreDOM.style.display =\"inline-block\";\r\n  }\r\n  else {\r\n    alert(\"Search input cant be empty\");\r\n  }\r\n})\r\n\r\n\r\nloadmoreDOM.addEventListener('click', _ => {\r\n  page++;\r\n  getPhoto(last_search_text);\r\n})"],"names":["loadingDOM","search_btn","galleryDOM","base_url","searchInput","loadmoreDOM","api_key","last_search_text","page","refresh","getPhoto","searchText","full_url","response","axios","images","fragment","image","li","lightbox","SimpleLightbox","iziToast","instance","toast","closedBy","error","_"],"mappings":"owBA6BA,MAAMA,EAAa,SAAS,cAAc,UAAU,EAC9CC,EAAa,SAAS,cAAc,YAAY,EAChDC,EAAa,SAAS,cAAc,UAAU,EAC9CC,EAAW,4BACXC,EAAc,SAAS,cAAc,cAAc,EACnDC,EAAc,SAAS,cAAc,WAAW,EAChDC,EAAU,qCAGhB,IAAIC,EAAmB,GACnBC,EAAO,EACX,SAASC,GAAS,CAChBP,EAAW,UAAU,EACvB,CAEA,eAAeQ,EAASC,EAAW,CAC9BH,GAAQ,GACTC,IAEF,MAAMG,EAAW,GAAGT,CAAQ,OAAOG,CAAO,MAAMK,CAAU,6EAA6EH,CAAI,GAE3I,GAAI,CACFR,EAAW,MAAM,QAAU,QAC3B,MAAMa,EAAW,MAAMC,EAAMF,CAAQ,EAEpC,GAAI,EAAEC,EAAS,QAAU,KAAOA,EAAS,OAAS,KACjD,MAAM,IAAI,MAAM,oBAAoBA,EAAS,MAAM,EAAE,EAEvDb,EAAW,MAAM,QAAU,OAC3B,MAAMe,EAASF,EAAS,KACxB,IAAGE,GAAA,YAAAA,EAAQ,KAAK,QAAS,EAAE,CACzBX,EAAY,MAAQ,GACpB,MAAMY,EAAW,SAAS,yBAC1BD,EAAO,KAAK,QAASE,GAAU,CAC7B,MAAMC,EAAK,SAAS,cAAc,IAAI,EACtCA,EAAG,UAAY,YAAYD,EAAM,aAAa;AAAA,wBAC9BA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,qCAIzBA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,qCAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,qCAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,qCAIdA,EAAM,SAAS;AAAA;AAAA;AAAA,gBAI5CD,EAAS,YAAYE,CAAE,CAC/B,CAAO,EACDhB,EAAW,YAAYc,CAAQ,EAC/B,MAAMG,EAAW,IAAIC,EAAe,aAAc,CAChD,SAAU,GACV,aAAc,MACd,aAAc,IACd,YAAa,GACb,eAAgB,GAChB,KAAM,GACN,IAAK,GACL,MAAO,GACP,eAAgB,GACxB,CAAK,EAEDD,EAAS,GAAG,sBAAuB,UAAY,CAC7C,QAAQ,IAAI,gBAAgB,CAClC,CAAK,EAEDA,EAAS,GAAG,uBAAwB,UAAY,CAC9C,QAAQ,IAAI,iBAAiB,CACnC,CAAK,CACA,MAOCd,EAAY,MAAM,QAAU,OAC5BgB,EAAS,KAAK,CACZ,MAAO,SACP,KAAM,4BACN,QAAS,4EACT,SAAU,WACV,iBAAkB,UAClB,UAAW,SAASC,EAAUC,EAAM,CAChC,QAAQ,KAAK,eAAe,CAC/B,EACD,UAAW,SAASD,EAAUC,EAAOC,EAAS,CAC1C,QAAQ,KAAK,aAAeA,CAAQ,CACvC,CACT,CAAK,CAIF,OAAQC,EAAO,CACdzB,EAAW,MAAM,QAAU,OAC3B,QAAQ,MAAMyB,EAAM,OAAO,CAC5B,CAEH,CAEAxB,EAAW,iBAAiB,QAASyB,GAAK,CACxC,MAAMf,EAAaP,EAAY,MAAM,KAAI,EAEtCO,GACDH,EAAO,EACPD,EAAmBI,EACnBD,EAASH,CAAgB,EACzBF,EAAY,MAAM,QAAS,gBAG3B,MAAM,4BAA4B,CAEtC,CAAC,EAGDA,EAAY,iBAAiB,QAASqB,GAAK,CACzClB,IACAE,EAASH,CAAgB,CAC3B,CAAC"}